
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.0
  creationTimestamp: null
  name: starlarkfunctions.config.supervisor.pinniped.dev
spec:
  group: config.supervisor.pinniped.dev
  names:
    categories:
    - pinniped
    kind: StarlarkFunction
    listKind: StarlarkFunctionList
    plural: starlarkfunctions
    singular: starlarkfunction
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: StarlarkFunction is a Starlark script.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec of the StarlarkFunction.
            properties:
              additionalParams:
                description: AdditionalParams declare what additional params are allowed.
                  These are metadata to assist in the business logic of the transform
                  function, but are not returned by the transform function because
                  they are immutable and each call in the chain will define their
                  own metadata param values. They will be passed to the function as
                  extra params in the same order that they are defined here.
                items:
                  description: StarlarkFunctionParam defines an additional param for
                    a StarlarkFunction script.
                  properties:
                    name:
                      description: Name is the name of the param. This name can be
                        used to pass a value for this param.
                      minLength: 1
                      type: string
                    type:
                      description: Type is the type of the param. When a value is
                        passed for this param, the value's type must match the declared
                        type for the param.
                      minLength: 1
                      type: string
                  required:
                  - name
                  - type
                  type: object
                type: array
              script:
                description: "Script is the Starlark source code of this StarlarkFunction.
                  It must include a function whose name and input params match those
                  of the function's Type, plus accept any additional params listed
                  by AdditionalParams. \n Starlark is a simplified dialect of Python,
                  and therefore whitespace indentation is meaningful. Please exercise
                  caution to ensure that the whitespace of the script is preserved
                  when setting the value of this field. \n The documentation for the
                  Starlark programming language dialect used by Pinniped can be found
                  at https://github.com/google/starlark-go/blob/master/doc/spec.md.
                  Pinniped enables the Set type and related functions for use in these
                  scripts, which is an extension of the Starlark standard. Consistent
                  with the Starlark standard, if, for, and while statements are not
                  permitted at the top level, and top-level rebindings are not permitted."
                minLength: 1
                type: string
              type:
                description: The type of transformation decides where it is appropriate
                  to use, what inputs are passed to the script, and what outputs are
                  expected for the script to return. All transformable inputs are
                  also returned as outputs, which allows the chaining of multiple
                  transform functions of the same type. The available types are defined
                  as constants and are not user-defined.
                enum:
                - usernameAndGroups.transform.pinniped.dev/v1
                type: string
            required:
            - script
            - type
            type: object
          status:
            description: Status of StarlarkFunction.
            properties:
              lastUpdateTime:
                description: LastUpdateTime holds the time at which the Status was
                  last updated. It is a pointer to get around some undesirable behavior
                  with respect to the empty metav1.Time value (see https://github.com/kubernetes/kubernetes/issues/86811).
                format: date-time
                type: string
              message:
                description: Message provides human-readable details about the Status.
                type: string
              status:
                description: Status holds an enum that describes the state of this
                  resource. Note that this Status can represent success or failure.
                enum:
                - Success
                - LoadError
                - TestFailure
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
